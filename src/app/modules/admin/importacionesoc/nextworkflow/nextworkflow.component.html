<!-- src/app/document-upload/document-upload.component.html -->

<p-card>

  <div class="p-card-title mb-4 p-4 border-b border-gray-200">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center md:text-left">
      <!-- Código y Nombre del Proveedor -->
      <div>
        <span class="block font-bold text-gray-700">Proveedor:</span>
        <span class="text-lg text-gray-600">{{ this.instance.config.data.cO_PROV }} - {{ this.instance.config.data.nO_PROV }}</span>
      </div>
      
      <!-- Número de OC -->
      <div>
        <span class="block font-bold text-gray-700">Orden de Compra (OC):</span>
        <span class="text-lg text-gray-600">{{ this.instance.config.data.nU_ORDE_COMP }}</span>
      </div>
      
      <!-- Estado -->
      <div>
        <span class="block font-bold text-gray-700">Estado Actual:</span>
        <span class="text-lg text-gray-600">{{ this.instance.config.data.estado }}</span>
      </div>
    </div>
  </div>
  



  <form [formGroup]="documentoForm">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <!-- Primera columna -->
      <div class="col-span-1 flex space-x-4 justify-center">
        <p-button 
          label="Iniciar" 
          icon="pi pi-play" 
          (onClick)="Iniciar()"
          class="p-button-success w-32" 
        ></p-button>
        
        <p-button 
          label="Finalizar" 
          icon="pi pi-stop"
          (onClick)="Finalizar()" 
          class="p-button-warning w-32" 
        ></p-button>
      </div>

      <!-- Segunda columna -->
      <div class="col-span-1 space-y-4">
        <div class="p-field">
          <label for="tipoDocumento" class="block text-sm font-medium">Tipo de Documento</label>
          <p-dropdown 
            id="tipoDocumento" 
            formControlName="tipoDocumento" 
            [options]="tiposDocumento" 
            placeholder="Seleccionar Tipo" 
            class="w-full"
          ></p-dropdown>
        </div>

        <div class="p-field">
          <label for="archivoDocumento" class="block text-sm font-medium">Subir Documento</label>
          <p-fileUpload 
            name="archivo" 
            (onSelect)="uploadSelectedFiles($event)" 
            mode="basic" 
            chooseLabel="Agregar" 
            (onUpload)="onUpload($event)" 
            [auto]="true" 
            class="w-full"
          ></p-fileUpload>
        </div>
      </div>
    </div>
  </form>

  <!-- Grilla de documentos cargados -->
  <p-table [value]="documentosCargados" class="mt-6 w-full">
    <ng-template pTemplate="header">
      <tr>
        <th>Tipo Documento</th>
        <th>Nombre Archivo</th>
        <th>Fecha Subida</th>
        <th>Acción</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-documento>
      <tr>
        <td>{{ documento.fileType }}</td>
        <td>{{ documento.fileName }}</td>
        <td>{{ documento.uploadDate | date: 'yyyy-MM-dd' }}</td>
        <td>
          <button 
            pButton 
            type="button" 
            icon="pi pi-trash" 
            class="p-button-danger" 
            (click)="eliminarDocumento(documento)"
          ></button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</p-card>
